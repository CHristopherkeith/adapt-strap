{"version":3,"file":"utils.min.js","sources":["utils/utils.js"],"names":["angular","module","factory","$filter","evalObjectProperty","obj","property","arr","split","length","shift","applyFilter","value","filter","parts","filterOptions","$timeout","$q","deb","func","delay","immediate","ctx","timer","deferred","defer","wait","context","this","args","arguments","callNow","later","resolve","apply","cancel","promise","provider","defaults","request","start","pageSize","page","response","itemsLocation","totalItems","$get","settings","$adPaging","$http","adStrapUtils","pageToLoad","ajaxConfigOriginal","identityToken","i","startPagingPage","success","err","pagingConfig","copy","ajaxConfig","paginationConfig","extend","params","res","items","currentPage","totalPages","Math","ceil","pagingArray","push","error","reject","method","jsonp","url"],"mappings":"AAOAA,QAAQC,OAAO,8BAA+BC,QAAQ,gBACpD,UACA,SAAUC,GACR,OACEC,mBAAoB,SAAUC,EAAKC,GACjC,GAAIC,GAAMD,EAASE,MAAM,IACzB,IAAIH,EACF,KAAOE,EAAIE,QACLJ,IACFA,EAAMA,EAAIE,EAAIG,SAIpB,OAAOL,IAETM,YAAa,SAAUC,EAAOC,GAC5B,GAAIC,GAAOC,CAUX,OATIF,KACFC,EAAQD,EAAOL,MAAM,KACrBO,EAAgBD,EAAM,GAEpBF,EADEG,EACMZ,EAAQW,EAAM,IAAIF,EAAOG,GAEzBZ,EAAQW,EAAM,IAAIF,IAGvBA,OAIZV,QAAQ,cACT,WACA,KACA,SAAUc,EAAUC,GAClB,YACA,IAAIC,GAAM,SAAUC,EAAMC,EAAOC,EAAWC,GAC1C,GAAIC,GAAQ,KAAMC,EAAWP,EAAGQ,QAASC,EAAON,GAAS,GACzD,OAAO,YACL,GAAIO,GAAUL,GAAOM,KAAMC,EAAOC,UAAWC,EAAUV,IAAcE,EAAOS,EAAQ,WAC3EX,IACHG,EAASS,QAAQd,EAAKe,MAAMP,EAASE,IACrCL,EAAWP,EAAGQ,SAWpB,OARIF,IACFP,EAASmB,OAAOZ,GAElBA,EAAQP,EAASgB,EAAON,GACpBK,IACFP,EAASS,QAAQd,EAAKe,MAAMP,EAASE,IACrCL,EAAWP,EAAGQ,SAETD,EAASY,SAGpB,OAAOlB,MAERmB,SAAS,YAAa,WACvB,GAAIC,GAAWV,KAAKU,UAChBC,SACEC,MAAO,OACPC,SAAU,QACVC,KAAM,QAERC,UACEC,cAAe,OACfC,WAAY,yBAGlBjB,MAAKkB,KAAO,WACV,OAASC,SAAUT,MAEpBpC,QAAQ,cACT,YACA,KACA,QACA,eACA,SAAU8C,EAAW/B,EAAIgC,EAAOC,GAC9B,MAAO,UAAUC,EAAYV,EAAUW,EAAoBC,GACzD,GAAyCC,GAAGC,EAAiBC,EAASC,EAAlEjB,GAASW,EAAa,GAAKV,EAA4ChB,EAAQR,EAAGQ,QAASiC,EAAe1D,QAAQ2D,KAAKX,EAAUD,UAAWa,EAAa5D,QAAQ2D,KAAKP,EAkC1K,OAjCIQ,GAAWC,kBAAoBD,EAAWC,iBAAiBtB,SAC7DvC,QAAQ8D,OAAOJ,EAAanB,QAASqB,EAAWC,iBAAiBtB,SAE/DqB,EAAWC,kBAAoBD,EAAWC,iBAAiBlB,UAC7D3C,QAAQ8D,OAAOJ,EAAaf,SAAUiB,EAAWC,iBAAiBlB,UAEpEiB,EAAWG,OAAOL,EAAanB,QAAQC,OAASA,EAChDoB,EAAWG,OAAOL,EAAanB,QAAQE,UAAYA,EACnDmB,EAAWG,OAAOL,EAAanB,QAAQG,MAAQS,EAC/CK,EAAU,SAAUQ,GAClB,GAAIrB,IACAsB,MAAOf,EAAa9C,mBAAmB4D,EAAKN,EAAaf,SAASC,eAClEsB,YAAaf,EACbgB,WAAYC,KAAKC,KAAKnB,EAAa9C,mBAAmB4D,EAAKN,EAAaf,SAASE,YAAcJ,GAC/F6B,eACAjB,cAAeA,EAGnB,KADAE,EAAkBa,KAAKC,KAAKlB,EAAaV,GAAYA,GAAYA,EAAW,GACvEa,EAAI,EAAO,EAAJA,EAAOA,IACbC,EAAkBD,EAAI,GAAKC,EAAkBD,GAAKX,EAASwB,YAC7DxB,EAAS2B,YAAYC,KAAKhB,EAAkBD,EAGhD7B,GAAMQ,QAAQU,IAEhBc,EAAM,SAAUe,GACd/C,EAAMgD,OAAOD,IAEW,UAAtBZ,EAAWc,OACbzB,EAAM0B,MAAMf,EAAWgB,IAAM,0BAA2BhB,GAAYJ,QAAQA,GAASgB,MAAMf,GAE3FR,EAAMW,GAAYJ,QAAQA,GAASgB,MAAMf,GAEpChC,EAAMW","sourcesContent":["angular.module('adaptv.adaptStrap.utils', [])\n  .factory('adStrapUtils', ['$filter', function ($filter) {\n    return {\n      evalObjectProperty: function (obj, property) {\n        var arr = property.split('.');\n        if (obj) {\n          while (arr.length) {\n            if (obj) {\n              obj = obj[arr.shift()];\n            }\n          }\n        }\n        return obj;\n      },\n      applyFilter: function (value, filter) {\n        var parts,\n          filterOptions;\n        if (filter) {\n          parts = filter.split(':');\n          filterOptions = parts[1];\n          if (filterOptions) {\n            value = $filter(parts[0])(value, filterOptions);\n          } else {\n            value = $filter(parts[0])(value);\n          }\n        }\n        return value;\n      }\n    };\n  }])\n  .factory('adDebounce', ['$timeout', '$q', function ($timeout, $q) {\n    'use strict';\n    var deb = function (func, delay, immediate, ctx) {\n      var timer = null,\n        deferred = $q.defer(),\n        wait = delay || 300;\n      return function () {\n        var context = ctx || this,\n          args = arguments,\n          callNow = immediate && !timer,\n          later = function () {\n            if (!immediate) {\n              deferred.resolve(func.apply(context, args));\n              deferred = $q.defer();\n            }\n          };\n        if (timer) {\n          $timeout.cancel(timer);\n        }\n        timer = $timeout(later, wait);\n        if (callNow) {\n          deferred.resolve(func.apply(context, args));\n          deferred = $q.defer();\n        }\n        return deferred.promise;\n      };\n    };\n\n    return deb;\n  }])\n  .provider('$adPaging', function () {\n    var defaults = this.defaults = {\n      request: {\n        start: 'skip',\n        pageSize: 'limit',\n        page: 'page'\n      },\n      response: {\n        itemsLocation: 'data',\n        totalItems: 'pagination.totalCount'\n      }\n    };\n    this.$get = function () {\n      return {\n        settings: defaults\n      };\n    };\n  })\n  .factory('adLoadPage', ['$adPaging', '$q', '$http', 'adStrapUtils', function ($adPaging, $q, $http, adStrapUtils) {\n    return function (pageToLoad, pageSize, ajaxConfigOriginal, identityToken) {\n      var start = (pageToLoad - 1) * pageSize,\n        i,\n        startPagingPage,\n        success,\n        err,\n        defer = $q.defer(),\n        pagingConfig = angular.copy($adPaging.settings),\n        ajaxConfig = angular.copy(ajaxConfigOriginal);\n\n      if (ajaxConfig.paginationConfig && ajaxConfig.paginationConfig.request) {\n        angular.extend(pagingConfig.request, ajaxConfig.paginationConfig.request);\n      }\n      if (ajaxConfig.paginationConfig && ajaxConfig.paginationConfig.response) {\n        angular.extend(pagingConfig.response, ajaxConfig.paginationConfig.response);\n      }\n\n      ajaxConfig.params[pagingConfig.request.start] = start;\n      ajaxConfig.params[pagingConfig.request.pageSize] = pageSize;\n      ajaxConfig.params[pagingConfig.request.page] = pageToLoad;\n\n      success = function (res) {\n        var response = {\n          items: adStrapUtils.evalObjectProperty(res, pagingConfig.response.itemsLocation),\n          currentPage: pageToLoad,\n          totalPages: Math.ceil(\n              adStrapUtils.evalObjectProperty(res, pagingConfig.response.totalItems) /\n              pageSize\n          ),\n          pagingArray: [],\n          identityToken: identityToken\n        };\n        startPagingPage = (Math.ceil(pageToLoad / pageSize) * pageSize) - (pageSize - 1);\n        for (i = 0; i < 5; i++) {\n          if (startPagingPage + i > 0 && startPagingPage + i <= response.totalPages) {\n            response.pagingArray.push(startPagingPage + i);\n          }\n        }\n        defer.resolve(response);\n      };\n\n      err = function (error) {\n        defer.reject(error);\n      };\n\n      if (ajaxConfig.method === 'JSONP') {\n        $http.jsonp(ajaxConfig.url + '?callback=JSON_CALLBACK', ajaxConfig).success(success).error(err);\n      } else {\n        $http(ajaxConfig).success(success).error(err);\n      }\n      return defer.promise;\n    };\n  }]);\n"],"sourceRoot":"/source/"}