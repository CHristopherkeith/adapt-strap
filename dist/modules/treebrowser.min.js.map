{"version":3,"file":"treebrowser.min.js","sources":["treebrowser/treebrowser.js"],"names":["angular","module","provider","defaults","this","expandIconClass","collapseIconClass","loadingIconClass","$get","settings","directive","$compile","$http","$treebrowser","$templateCache","restrict","link","scope","element","attrs","treeName","nodeTemplateUrl","nodeHeaderUrl","childrenPadding","template","populateMainTemplate","nodeTemplate","nodeHeaderTemplate","data","get","replace","treeRoot","bordered","childNode","rowNgClass","empty","append","toggle","event","item","toggleCallback","stopPropagation","$eval","_expanded","hasChildren","found","length","showHeader","success","headerTemplate"],"mappings":"AAOA,YACAA,SAAQC,OAAO,oCAAqCC,SAAS,eAAgB,WAC3E,GAAIC,GAAWC,KAAKD,UAChBE,gBAAiB,gCACjBC,kBAAmB,iCACnBC,iBAAkB,sCAEtBH,MAAKI,KAAO,WACV,OAASC,SAAUN,MAEpBO,UAAU,iBACX,WACA,QACA,eACA,iBACA,SAAUC,EAAUC,EAAOC,EAAcC,GACvC,OACEC,SAAU,IACVC,KAAM,SAAUC,EAAOC,EAASC,GAC9B,GAAIC,GAAWD,EAAMC,UAAY,GAAIC,EAAkBF,EAAME,iBAAmB,GAAIC,EAAgBH,EAAMG,eAAiB,GAAIC,EAAkBJ,EAAMI,iBAAmB,GAAIC,EAAW,GAAIC,EAAuB,SAAUC,EAAcC,GACxO,GAAIC,GAAOd,EAAee,IAAI,mCAC9BL,GAAWI,EAAKE,QAAQ,eAAgBV,GAAUU,QAAQ,mBAAoBX,EAAMY,UAAUD,QAAQ,eAAgBX,EAAMa,UAAUF,QAAQ,sBAAuBX,EAAMd,iBAAmBQ,EAAaJ,SAASJ,iBAAiByB,QAAQ,wBAAyBX,EAAMb,mBAAqBO,EAAaJ,SAASH,mBAAmBwB,QAAQ,uBAAwBX,EAAMZ,kBAAoBM,EAAaJ,SAASF,kBAAkBuB,QAAQ,oBAAqBX,EAAMc,WAAWH,QAAQ,sBAAuBP,GAAiBO,QAAQ,iBAAkBX,EAAMe,YAAc,IAAIJ,QAAQ,mBAAoBJ,GAAcI,QAAQ,yBAA0BH,GAAsB,IAC9pBT,EAAQiB,QACRjB,EAAQkB,OAAOzB,EAASa,GAAUP,IAEtCA,GAAMG,EAAW,gBACfiB,OAAQ,SAAUC,EAAOC,GACvB,GAAIC,EACJF,GAAMG,kBACND,EAAiBvB,EAAMyB,MAAMvB,EAAMqB,gBAC/BA,EACFA,EAAeD,GAEfA,EAAKI,WAAaJ,EAAKI,WAG3BC,YAAa,SAAUL,GACrB,GAAIK,GAAc3B,EAAMyB,MAAMvB,EAAMyB,aAAcC,EAAQN,EAAKpB,EAAMc,YAAcM,EAAKpB,EAAMc,WAAWa,OAAS,CAIlH,OAHIF,KACFC,EAAQD,EAAYL,IAEfM,GAETE,WAA8B,KAAlBzB,GAAuB,GAAO,GAEpB,KAApBD,EAEFT,EAAMiB,IAAIR,GAAiB2B,QAAQ,SAAUtB,GACrB,KAAlBJ,EACFV,EAAMiB,IAAIP,GAAe0B,QAAQ,SAAUC,GACzCxB,EAAqBC,EAAcuB,KAGrCxB,EAAqBC,EAAc,MAIvCD,EAAqB","sourcesContent":["'use strict';\n\nangular.module('adaptv.adaptStrap.treebrowser', [])\n\n  .provider('$treebrowser', function () {\n    var defaults = this.defaults = {\n      expandIconClass: 'glyphicon glyphicon-plus-sign',\n      collapseIconClass: 'glyphicon glyphicon-minus-sign',\n      loadingIconClass: 'glyphicon glyphicon-refresh ad-spin'\n    };\n    this.$get = function () {\n      return {\n        settings: defaults\n      };\n    };\n  })\n\n/**\n * adTreeBrowser directive populates a tree dataStructure\n */\n  .directive('adTreeBrowser', ['$compile', '$http', '$treebrowser', '$templateCache',\n    function ($compile, $http, $treebrowser, $templateCache) {\n      return {\n        restrict: 'E',\n        link: function (scope, element, attrs) {\n          var treeName = attrs.treeName || '',\n            nodeTemplateUrl = attrs.nodeTemplateUrl || '',\n            nodeHeaderUrl = attrs.nodeHeaderUrl || '',\n            childrenPadding = attrs.childrenPadding || 15,\n            template = '',\n            populateMainTemplate = function (nodeTemplate, nodeHeaderTemplate) {\n              var data = $templateCache.get('treebrowser/treebrowser.tpl.html');\n              template = data.replace(/%=treeName%/g, treeName).\n                replace(/%=treeRootName%/g, attrs.treeRoot).\n                replace(/%=bordered%/g, attrs.bordered).\n                replace(/%=expandIconClass%/g, attrs.expandIconClass || $treebrowser.settings.expandIconClass).\n                replace(/%=collapseIconClass%/g, attrs.collapseIconClass || $treebrowser.settings.collapseIconClass).\n                replace(/%=loadingIconClass%/g, attrs.loadingIconClass || $treebrowser.settings.loadingIconClass).\n                replace(/%=childNodeName%/g, attrs.childNode).\n                replace(/%=childrenPadding%/g, childrenPadding).\n                replace(/%=rowNgClass%/g, attrs.rowNgClass || '').\n                replace(/%=nodeTemplate%/g, nodeTemplate).\n                replace(/%=nodeHeaderTemplate%/g, nodeHeaderTemplate || '');\n              element.empty();\n              element.append($compile(template)(scope));\n            };\n          scope[treeName + 'TreeBrowser'] = {\n            toggle: function (event, item) {\n              var toggleCallback;\n              event.stopPropagation();\n              toggleCallback = scope.$eval(attrs.toggleCallback);\n              if (toggleCallback) {\n                toggleCallback(item);\n              } else {\n                item._expanded = !item._expanded;\n              }\n            },\n            hasChildren: function (item) {\n              var hasChildren = scope.$eval(attrs.hasChildren),\n                found = item[attrs.childNode] && item[attrs.childNode].length > 0;\n              if (hasChildren) {\n                found = hasChildren(item);\n              }\n              return found;\n            },\n            showHeader: (nodeHeaderUrl !== '') ? true : false\n          };\n          if (nodeTemplateUrl !== '') {\n            // Getting the template from nodeTemplateUrl\n            $http.get(nodeTemplateUrl).success(function (nodeTemplate) {\n              if (nodeHeaderUrl !== '') {\n                $http.get(nodeHeaderUrl).success(function (headerTemplate) {\n                  populateMainTemplate(nodeTemplate, headerTemplate);\n                });\n              } else {\n                populateMainTemplate(nodeTemplate, '');\n              }\n            });\n          } else {\n            populateMainTemplate('<span>{{ item.name || \"\" }}</span>');\n          }\n        }\n      };\n    }]);\n"],"sourceRoot":"/source/"}