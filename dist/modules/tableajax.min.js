/**
 * adapt-strap
 * @version v0.1.9 - 2014-08-01
 * @link https://github.com/Adaptv/adapt-strap
 * @author Kashyap Patel (kashyap@adap.tv)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
angular.module("adaptv.adaptStrap.tableajax",["adaptv.adaptStrap.utils","adaptv.adaptStrap.loadingindicator"]).directive("adTableAjax",["$parse","$compile","$templateCache","adLoadPage","adDebounce","adStrapUtils",function(a,e,t,i,g,n){"use strict";function l(l,o,p){l[p.tableName]={items:{list:void 0,paging:{currentPage:1,totalPages:void 0,pageSize:void 0,pageSizes:a(p.pageSizes)()||[10,25,50]}},localConfig:{pagingArray:[],loadingData:!1},ajaxConfig:l.$eval(p.ajaxConfig),applyFilter:n.applyFilter};var s,r=l[p.tableName],c=t.get("tableajax/tableajax.tpl.html");r.items.paging.pageSize=r.items.paging.pageSizes[0],r.loadPage=g(function(a){s=Math.random(),r.localConfig.loadingData=!0,i(a,r.items.paging.pageSize,r.ajaxConfig,s).then(function(a){a.identityToken===s&&(r.items.list=a.items,r.items.paging.totalPages=a.totalPages,r.items.paging.currentPage=a.currentPage,r.localConfig.pagingArray=a.pagingArray,r.localConfig.loadingData=!1)},function(){r.localConfig.loadingData=!1})}),r.loadNextPage=function(){r.localConfig.loadingData||r.items.paging.currentPage+1<=r.items.paging.totalPages&&r.loadPage(r.items.paging.currentPage+1)},r.loadPreviousPage=function(){r.localConfig.loadingData||r.items.paging.currentPage-1>0&&r.loadPage(r.items.paging.currentPage-1)},r.loadLastPage=function(){r.localConfig.loadingData||r.items.paging.currentPage!==r.items.paging.totalPages&&r.loadPage(r.items.paging.totalPages)},r.pageSizeChanged=function(a){Number(a)!==r.items.paging.pageSize&&(r.items.paging.pageSize=Number(a),r.loadPage(1))},r.loadPage(1),l.$watch(p.ajaxConfig,function(){r.loadPage(1)},!0),p.tableClasses=p.tableClasses||"table",p.paginationBtnGroupClasses=p.paginationBtnGroupClasses||"btn-group btn-group-sm",c=c.replace(/%=tableName%/g,p.tableName).replace(/%=columnDefinition%/g,p.columnDefinition).replace(/%=tableClasses%/g,p.tableClasses).replace(/%=paginationBtnGroupClasses%/g,p.paginationBtnGroupClasses),o.empty(),o.append(e(c)(l))}return{restrict:"E",link:l}}]);
//# sourceMappingURL=tableajax.min.js.map