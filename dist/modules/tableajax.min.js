/**
 * adapt-strap
 * @version v0.2.2 - 2014-08-05
 * @link https://github.com/Adaptv/adapt-strap
 * @author Kashyap Patel (kashyap@adap.tv)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
angular.module("adaptv.adaptStrap.tableajax",["adaptv.adaptStrap.utils","adaptv.adaptStrap.loadingindicator"]).directive("adTableAjax",["$parse","$compile","$templateCache","$adConfig","adLoadPage","adDebounce","adStrapUtils",function(a,e,i,g,t,n,o){"use strict";function l(l,s,r){l[r.tableName]={items:{list:void 0,paging:{currentPage:1,totalPages:void 0,pageSize:void 0,pageSizes:a(r.pageSizes)()||[10,25,50]}},localConfig:{pagingArray:[],loadingData:!1},ajaxConfig:l.$eval(r.ajaxConfig),applyFilter:o.applyFilter};var c,p=l[r.tableName],d=i.get("tableajax/tableajax.tpl.html");p.items.paging.pageSize=p.items.paging.pageSizes[0],p.loadPage=n(function(a){c=Math.random(),p.localConfig.loadingData=!0;var e=l.$eval(r.pageLoader)||t,i={pageNumber:a,pageSize:p.items.paging.pageSize,sortKey:p.localConfig.predicate,sortDirection:p.localConfig.reverse,ajaxConfig:p.ajaxConfig,token:c},g=function(a){a.token===c&&(p.items.list=a.items,p.items.paging.totalPages=a.totalPages,p.items.paging.currentPage=a.currentPage,p.localConfig.pagingArray=a.pagingArray,p.localConfig.loadingData=!1)},n=function(){p.localConfig.loadingData=!1};e(i).then(g,n)}),p.loadNextPage=function(){p.localConfig.loadingData||p.items.paging.currentPage+1<=p.items.paging.totalPages&&p.loadPage(p.items.paging.currentPage+1)},p.loadPreviousPage=function(){p.localConfig.loadingData||p.items.paging.currentPage-1>0&&p.loadPage(p.items.paging.currentPage-1)},p.loadLastPage=function(){p.localConfig.loadingData||p.items.paging.currentPage!==p.items.paging.totalPages&&p.loadPage(p.items.paging.totalPages)},p.pageSizeChanged=function(a){Number(a)!==p.items.paging.pageSize&&(p.items.paging.pageSize=Number(a),p.loadPage(1))},p.sortByColumn=function(a){a.sortKey&&(a.sortKey!==p.localConfig.predicate?(p.localConfig.predicate=a.sortKey,p.localConfig.reverse=!0):p.localConfig.reverse===!0?p.localConfig.reverse=!1:(p.localConfig.reverse=void 0,p.localConfig.predicate=void 0),p.loadPage(p.items.paging.currentPage))},p.loadPage(1),l.$watch(r.ajaxConfig,function(){p.loadPage(1)},!0),r.tableClasses=r.tableClasses||"table",r.paginationBtnGroupClasses=r.paginationBtnGroupClasses||"btn-group btn-group-sm",d=d.replace(/%=tableName%/g,r.tableName).replace(/%=columnDefinition%/g,r.columnDefinition).replace(/%=tableClasses%/g,r.tableClasses).replace(/%=paginationBtnGroupClasses%/g,r.paginationBtnGroupClasses).replace(/%=icon-firstPage%/g,g.iconClasses.firstPage).replace(/%=icon-previousPage%/g,g.iconClasses.previousPage).replace(/%=icon-nextPage%/g,g.iconClasses.nextPage).replace(/%=icon-lastPage%/g,g.iconClasses.lastPage).replace(/%=icon-sortAscending%/g,g.iconClasses.sortAscending).replace(/%=icon-sortDescending%/g,g.iconClasses.sortDescending).replace(/%=icon-sortable%/g,g.iconClasses.sortable),s.empty(),s.append(e(d)(l))}return{restrict:"E",link:l}}]);
//# sourceMappingURL=tableajax.min.js.map