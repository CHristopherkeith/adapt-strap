/**
 * adapt-strap
 * @version v0.2.0 - 2014-08-04
 * @link https://github.com/Adaptv/adapt-strap
 * @author Kashyap Patel (kashyap@adap.tv)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
angular.module("adaptv.adaptStrap.tableajax",["adaptv.adaptStrap.utils","adaptv.adaptStrap.loadingindicator"]).directive("adTableAjax",["$parse","$compile","$templateCache","$adConfig","adLoadPage","adDebounce","adStrapUtils",function(a,e,i,t,g,n,o){"use strict";function l(l,s,r){l[r.tableName]={items:{list:void 0,paging:{currentPage:1,totalPages:void 0,pageSize:void 0,pageSizes:a(r.pageSizes)()||[10,25,50]}},localConfig:{pagingArray:[],loadingData:!1},ajaxConfig:l.$eval(r.ajaxConfig),applyFilter:o.applyFilter};var p,c=l[r.tableName],d=i.get("tableajax/tableajax.tpl.html");c.items.paging.pageSize=c.items.paging.pageSizes[0],c.loadPage=n(function(a){p=Math.random(),c.localConfig.loadingData=!0,g(a,c.items.paging.pageSize,{field:c.localConfig.predicate,reverse:c.localConfig.reverse},c.ajaxConfig,p).then(function(a){a.identityToken===p&&(c.items.list=a.items,c.items.paging.totalPages=a.totalPages,c.items.paging.currentPage=a.currentPage,c.localConfig.pagingArray=a.pagingArray,c.localConfig.loadingData=!1)},function(){c.localConfig.loadingData=!1})}),c.loadNextPage=function(){c.localConfig.loadingData||c.items.paging.currentPage+1<=c.items.paging.totalPages&&c.loadPage(c.items.paging.currentPage+1)},c.loadPreviousPage=function(){c.localConfig.loadingData||c.items.paging.currentPage-1>0&&c.loadPage(c.items.paging.currentPage-1)},c.loadLastPage=function(){c.localConfig.loadingData||c.items.paging.currentPage!==c.items.paging.totalPages&&c.loadPage(c.items.paging.totalPages)},c.pageSizeChanged=function(a){Number(a)!==c.items.paging.pageSize&&(c.items.paging.pageSize=Number(a),c.loadPage(1))},c.sortByColumn=function(a){a.sortKey&&(c.localConfig.predicate=a.sortKey,c.localConfig.reverse=!c.localConfig.reverse,c.loadPage(c.items.paging.currentPage))},c.loadPage(1),l.$watch(r.ajaxConfig,function(){c.loadPage(1)},!0),r.tableClasses=r.tableClasses||"table",r.paginationBtnGroupClasses=r.paginationBtnGroupClasses||"btn-group btn-group-sm",d=d.replace(/%=tableName%/g,r.tableName).replace(/%=columnDefinition%/g,r.columnDefinition).replace(/%=tableClasses%/g,r.tableClasses).replace(/%=paginationBtnGroupClasses%/g,r.paginationBtnGroupClasses).replace(/%=icon-firstPage%/g,t.iconClasses.firstPage).replace(/%=icon-previousPage%/g,t.iconClasses.previousPage).replace(/%=icon-nextPage%/g,t.iconClasses.nextPage).replace(/%=icon-lastPage%/g,t.iconClasses.lastPage).replace(/%=icon-sortAscending%/g,t.iconClasses.sortAscending).replace(/%=icon-sortDescending%/g,t.iconClasses.sortDescending).replace(/%=icon-sortable%/g,t.iconClasses.sortable),s.empty(),s.append(e(d)(l))}return{restrict:"E",link:l}}]);
//# sourceMappingURL=tableajax.min.js.map