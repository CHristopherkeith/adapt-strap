/**
 * adapt-strap
 * @version v0.1.1 - 2014-07-29
 * @link https://github.com/Adaptv/adapt-strap
 * @author Kashyap Patel (kashyap@adap.tv)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
angular.module("adaptv.adaptStrap.tableajax",["adaptv.adaptStrap.utils"]).provider("$tableajax",function(){var a=this.defaults={expandIconClass:"glyphicon glyphicon-plus-sign",collapseIconClass:"glyphicon glyphicon-minus-sign",loadingIconClass:"glyphicon glyphicon-refresh ad-spin"};this.$get=function(){return{settings:a}}}).directive("adTableAjax",["$parse","$compile","$templateCache","$adPaging","adDebounce","adStrapUtils",function(a,e,i,g,n,t){"use strict";function l(l,s,o){l[o.tableName]={items:{list:void 0,paging:{currentPage:1,totalPages:void 0,pageSize:void 0,pageSizes:a(o.pageSizes)()||[10,25,50]}},localConfig:{pagingArray:[],disablePaging:!1},ajaxConfig:l.$eval(o.ajaxConfig),applyFilter:t.applyFilter};var p,r=l[o.tableName],c=i.get("tableajax/tableajax.tpl.html");r.items.paging.pageSize=r.items.paging.pageSizes[0],r.loadPage=n(function(a){p=Math.random(),r.localConfig.disablePaging=!0,g.loadPage(a,r.items.paging.pageSize,r.ajaxConfig,p).then(function(a){a.identityToken===p&&(r.items.list=a.items,r.items.paging.totalPages=a.totalPages,r.items.paging.currentPage=a.currentPage,r.localConfig.pagingArray=a.pagingArray,r.localConfig.disablePaging=!1)},function(){r.localConfig.disablePaging=!1})},50,!1),r.loadNextPage=function(){r.localConfig.disablePaging||r.items.paging.currentPage+1<=r.items.paging.totalPages&&r.loadPage(r.items.paging.currentPage+1)},r.loadPreviousPage=function(){r.localConfig.disablePaging||r.items.paging.currentPage-1>0&&r.loadPage(r.items.paging.currentPage-1)},r.loadLastPage=function(){r.localConfig.disablePaging||r.items.paging.currentPage!==r.items.paging.totalPages&&r.loadPage(r.items.paging.totalPages)},r.pageSizeChanged=function(a){Number(a)!==r.items.paging.pageSize&&(r.items.paging.pageSize=Number(a),r.loadPage(1))},r.loadPage(1),l.$watch(o.ajaxConfig,function(){r.loadPage(1)},!0),o.tableClasses=o.tableClasses||"table",o.paginationBtnGroupClasses=o.paginationBtnGroupClasses||"btn-group btn-group-sm",c=c.replace(/%=tableName%/g,o.tableName).replace(/%=columnDefinition%/g,o.columnDefinition).replace(/%=tableClasses%/g,o.tableClasses).replace(/%=paginationBtnGroupClasses%/g,o.paginationBtnGroupClasses),angular.element(s).html(e(c)(l))}return{restrict:"E",link:l}}]);
//# sourceMappingURL=tableajax.min.js.map