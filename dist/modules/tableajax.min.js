/**
 * adapt-strap
 * @version v0.1.6 - 2014-07-30
 * @link https://github.com/Adaptv/adapt-strap
 * @author Kashyap Patel (kashyap@adap.tv)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
angular.module("adaptv.adaptStrap.tableajax",["adaptv.adaptStrap.utils"]).directive("adTableAjax",["$parse","$compile","$templateCache","adLoadPage","adDebounce","adStrapUtils",function(a,e,i,g,t,n){"use strict";function l(l,o,s){l[s.tableName]={items:{list:void 0,paging:{currentPage:1,totalPages:void 0,pageSize:void 0,pageSizes:a(s.pageSizes)()||[10,25,50]}},localConfig:{pagingArray:[],disablePaging:!1},ajaxConfig:l.$eval(s.ajaxConfig),applyFilter:n.applyFilter};var p,r=l[s.tableName],c=i.get("tableajax/tableajax.tpl.html");r.items.paging.pageSize=r.items.paging.pageSizes[0],r.loadPage=t(function(a){p=Math.random(),r.localConfig.disablePaging=!0,g(a,r.items.paging.pageSize,r.ajaxConfig,p).then(function(a){a.identityToken===p&&(r.items.list=a.items,r.items.paging.totalPages=a.totalPages,r.items.paging.currentPage=a.currentPage,r.localConfig.pagingArray=a.pagingArray,r.localConfig.disablePaging=!1)},function(){r.localConfig.disablePaging=!1})}),r.loadNextPage=function(){r.localConfig.disablePaging||r.items.paging.currentPage+1<=r.items.paging.totalPages&&r.loadPage(r.items.paging.currentPage+1)},r.loadPreviousPage=function(){r.localConfig.disablePaging||r.items.paging.currentPage-1>0&&r.loadPage(r.items.paging.currentPage-1)},r.loadLastPage=function(){r.localConfig.disablePaging||r.items.paging.currentPage!==r.items.paging.totalPages&&r.loadPage(r.items.paging.totalPages)},r.pageSizeChanged=function(a){Number(a)!==r.items.paging.pageSize&&(r.items.paging.pageSize=Number(a),r.loadPage(1))},r.loadPage(1),l.$watch(s.ajaxConfig,function(){r.loadPage(1)},!0),s.tableClasses=s.tableClasses||"table",s.paginationBtnGroupClasses=s.paginationBtnGroupClasses||"btn-group btn-group-sm",c=c.replace(/%=tableName%/g,s.tableName).replace(/%=columnDefinition%/g,s.columnDefinition).replace(/%=tableClasses%/g,s.tableClasses).replace(/%=paginationBtnGroupClasses%/g,s.paginationBtnGroupClasses),angular.element(o).html(e(c)(l))}return{restrict:"E",link:l}}]);
//# sourceMappingURL=tableajax.min.js.map