/**
 * adapt-strap
 * @version v0.0.4 - 2014-07-27
 * @link https://github.com/Adaptv/adapt-strap
 * @author Kashyap Patel (kashyap@adap.tv)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(e,a,t){"use strict";angular.module("adaptv.adaptStrap",["adaptv.adaptStrap.treebrowser","adaptv.adaptStrap.tablelite","adaptv.adaptStrap.tableajax","adaptv.adaptStrap.utils"]),angular.module("adaptv.adaptStrap.tableajax",[]).provider("$tableajax",function(){var e=this.defaults={expandIconClass:"glyphicon glyphicon-plus-sign",collapseIconClass:"glyphicon glyphicon-minus-sign",loadingIconClass:"glyphicon glyphicon-refresh ad-spin"};this.$get=function(){return{settings:e}}}).directive("adTableAjax",["$q","$http","$compile","$filter","$templateCache","$adPaging","adStrapUtils",function(e,a,n,i,l,r,s){function g(e,a,i){e[i.tableName]={items:{list:t,paging:{currentPage:1,totalPages:t,pageSize:5}},localConfig:{pagingArray:[]},ajaxConfig:e.$eval(i.ajaxConfig),applyFilter:s.applyFilter};var g=e[i.tableName],o=l.get("tableajax/tableajax.tpl.html");g.loadPage=function(e){r.loadPage(e,g.items.paging.pageSize,g.ajaxConfig).then(function(e){g.items.list=e.items,g.items.paging.totalPages=e.totalPages,g.items.paging.currentPage=e.currentPage,g.localConfig.pagingArray=e.pagingArray})},g.loadNextPage=function(){g.items.paging.currentPage+1<=g.items.paging.totalPages&&g.loadPage(g.items.paging.currentPage+1)},g.loadPreviousPage=function(){g.items.paging.currentPage-1>0&&g.loadPage(g.items.paging.currentPage-1)},g.loadPage(1),i.tableClasses=i.tableClasses||"table",o=o.replace(/%=tableName%/g,i.tableName).replace(/%=columnDefinition%/g,i.columnDefinition).replace(/%=tableClasses%/g,i.tableClasses),angular.element(a).html(n(o)(e))}return{restrict:"E",link:g}}]),angular.module("adaptv.adaptStrap.tablelite",[]).provider("$tablelite",function(){var e=this.defaults={expandIconClass:"glyphicon glyphicon-plus-sign",collapseIconClass:"glyphicon glyphicon-minus-sign",loadingIconClass:"glyphicon glyphicon-refresh ad-spin"};this.$get=function(){return{settings:e}}}).directive("adTableLite",["$q","$http","$compile","$filter","$templateCache","adStrapUtils",function(e,a,n,i,l,r){function s(e,a,i){e[i.tableName]={items:{list:t,paging:{currentPage:1,totalPages:t,pageSize:5}},localConfig:{pagingArray:[]},applyFilter:r.applyFilter};var s=e[i.tableName],g=l.get("tablelite/tablelite.tpl.html");s.loadPage=function(a){var t,n,l=(a-1)*s.items.paging.pageSize,r=l+s.items.paging.pageSize;for(s.items.list=e.$eval(i.localDataSource).slice(l,r),s.items.paging.currentPage=a,s.items.paging.totalPages=Math.ceil(e.$eval(i.localDataSource).length/s.items.paging.pageSize),s.localConfig.pagingArray=[],n=Math.ceil(a/s.items.paging.pageSize)*s.items.paging.pageSize-(s.items.paging.pageSize-1),t=0;5>t;t++)n+t>0&&n+t<=s.items.paging.totalPages&&s.localConfig.pagingArray.push(n+t)},s.loadNextPage=function(){s.items.paging.currentPage+1<=s.items.paging.totalPages&&s.loadPage(s.items.paging.currentPage+1)},s.loadPreviousPage=function(){s.items.paging.currentPage-1>0&&s.loadPage(s.items.paging.currentPage-1)},s.loadPage(1),i.tableClasses=i.tableClasses||"table",g=g.replace(/%=tableName%/g,i.tableName).replace(/%=columnDefinition%/g,i.columnDefinition).replace(/%=tableClasses%/g,i.tableClasses),angular.element(a).html(n(g)(e))}return{restrict:"E",link:s}}]),angular.module("adaptv.adaptStrap.treebrowser",[]).provider("$treebrowser",function(){var e=this.defaults={expandIconClass:"glyphicon glyphicon-plus-sign",collapseIconClass:"glyphicon glyphicon-minus-sign",loadingIconClass:"glyphicon glyphicon-refresh ad-spin"};this.$get=function(){return{settings:e}}}).directive("adTreeBrowser",["$compile","$http","$treebrowser","$templateCache",function(e,a,t,n){return{restrict:"E",link:function(i,l,r){var s=r.treeName||"",g=r.nodeTemplateUrl||"",o=r.nodeHeaderUrl||"",p=r.childrenPadding||15,c="",d=function(a,g){var o=n.get("treebrowser/treebrowser.tpl.html");c=o.replace(/%=treeName%/g,s).replace(/%=treeRootName%/g,r.treeRoot).replace(/%=bordered%/g,r.bordered).replace(/%=expandIconClass%/g,r.expandIconClass||t.settings.expandIconClass).replace(/%=collapseIconClass%/g,r.collapseIconClass||t.settings.collapseIconClass).replace(/%=loadingIconClass%/g,r.loadingIconClass||t.settings.loadingIconClass).replace(/%=childNodeName%/g,r.childNode).replace(/%=childrenPadding%/g,p).replace(/%=rowNgClass%/g,r.rowNgClass||"").replace(/%=nodeTemplate%/g,a).replace(/%=nodeHeaderTemplate%/g,g||""),l.empty(),l.append(e(c)(i))};i[s+"TreeBrowser"]={toggle:function(e,a){var t;e.stopPropagation(),t=i.$eval(r.toggleCallback),t?t(a):a._expanded=!a._expanded},hasChildren:function(e){var a=i.$eval(r.hasChildren),t=e[r.childNode]&&e[r.childNode].length>0;return a&&(t=a(e)),t},showHeader:""!==o?!0:!1},""!==g?a.get(g).success(function(e){""!==o?a.get(o).success(function(a){d(e,a)}):d(e,"")}):d('<span>{{ item.name || "" }}</span>')}}}]),angular.module("adaptv.adaptStrap.utils",[]).factory("adStrapUtils",["$filter",function(e){return{evalObjectProperty:function(e,a){for(var t=a.split(".");t.length;)e=e[t.shift()];return e},applyFilter:function(a,t){var n,i;return t&&(n=t.split(":"),i=n[1],a=i?e(n[0])(a,i):e(n[0])(a)),a}}}]).provider("$adPaging",function(){var e=this.defaults={request:{start:"skip",pageSize:"limit",page:"page"},response:{totalItems:"data",itemsLocation:"pagination.totalCount"}};this.$get=function(a,t,n){return{loadPage:function(i,l,r){var s,g,o,p=(i-1)*l,c=a.defer(),d=angular.copy(e);return r.paginationConfig&&r.paginationConfig.request&&angular.extend(d.request,r.paginationConfig.request),r.paginationConfig&&r.paginationConfig.response&&angular.extend(d.response,r.paginationConfig.response),r.params[d.request.start]=p,r.params[d.request.pageSize]=l,r.params[d.request.page]=i,o=function(e){var a={items:n.evalObjectProperty(e,d.response.itemsLocation),currentPage:i,totalPages:Math.ceil(n.evalObjectProperty(e,d.response.totalItems)/l),pagingArray:[]};for(g=Math.ceil(i/l)*l-(l-1),s=0;5>s;s++)g+s>0&&g+s<=a.totalPages&&a.pagingArray.push(g+s);c.resolve(a)},"JSONP"===r.method?t.jsonp(r.url+"?callback=JSON_CALLBACK",r).success(o):t(r).success(o),c.promise}}}})}(window,document);