/**
 * adapt-strap
 * @version v0.0.6 - 2014-07-28
 * @link https://github.com/Adaptv/adapt-strap
 * @author Kashyap Patel (kashyap@adap.tv)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(a,e,t){"use strict";angular.module("adaptv.adaptStrap",["adaptv.adaptStrap.treebrowser","adaptv.adaptStrap.tablelite","adaptv.adaptStrap.tableajax","adaptv.adaptStrap.utils"]),angular.module("adaptv.adaptStrap.tableajax",[]).provider("$tableajax",function(){var a=this.defaults={expandIconClass:"glyphicon glyphicon-plus-sign",collapseIconClass:"glyphicon glyphicon-minus-sign",loadingIconClass:"glyphicon glyphicon-refresh ad-spin"};this.$get=function(){return{settings:a}}}).directive("adTableAjax",["$parse","$compile","$templateCache","$adPaging","adDebounce","adStrapUtils",function(a,e,n,i,g,l){function s(s,o,r){s[r.tableName]={items:{list:t,paging:{currentPage:1,totalPages:t,pageSize:t,pageSizes:a(r.pageSizes)()||[10,25,50]}},localConfig:{pagingArray:[],disablePaging:!1},ajaxConfig:s.$eval(r.ajaxConfig),applyFilter:l.applyFilter};var p,c=s[r.tableName],u=n.get("tableajax/tableajax.tpl.html");c.items.paging.pageSize=c.items.paging.pageSizes[0],c.loadPage=g(function(a){p=Math.random(),c.localConfig.disablePaging=!0,i.loadPage(a,c.items.paging.pageSize,c.ajaxConfig,p).then(function(a){a.identityToken===p&&(c.items.list=a.items,c.items.paging.totalPages=a.totalPages,c.items.paging.currentPage=a.currentPage,c.localConfig.pagingArray=a.pagingArray,c.localConfig.disablePaging=!1)},function(){c.localConfig.disablePaging=!1})},50,!1),c.loadNextPage=function(){c.localConfig.disablePaging||c.items.paging.currentPage+1<=c.items.paging.totalPages&&c.loadPage(c.items.paging.currentPage+1)},c.loadPreviousPage=function(){c.localConfig.disablePaging||c.items.paging.currentPage-1>0&&c.loadPage(c.items.paging.currentPage-1)},c.loadLastPage=function(){c.localConfig.disablePaging||c.items.paging.currentPage!==c.items.paging.totalPages&&c.loadPage(c.items.paging.totalPages)},c.pageSizeChanged=function(a){Number(a)!==c.items.paging.pageSize&&(c.items.paging.pageSize=Number(a),c.loadPage(1))},c.loadPage(1),s.$watch(r.ajaxConfig,function(){c.loadPage(1)},!0),r.tableClasses=r.tableClasses||"table",r.paginationBtnGroupClasses=r.paginationBtnGroupClasses||"btn-group btn-group-sm",u=u.replace(/%=tableName%/g,r.tableName).replace(/%=columnDefinition%/g,r.columnDefinition).replace(/%=tableClasses%/g,r.tableClasses).replace(/%=paginationBtnGroupClasses%/g,r.paginationBtnGroupClasses),angular.element(o).html(e(u)(s))}return{restrict:"E",link:s}}]),angular.module("adaptv.adaptStrap.tablelite",[]).provider("$tablelite",function(){var a=this.defaults={expandIconClass:"glyphicon glyphicon-plus-sign",collapseIconClass:"glyphicon glyphicon-minus-sign",loadingIconClass:"glyphicon glyphicon-refresh ad-spin"};this.$get=function(){return{settings:a}}}).directive("adTableLite",["$parse","$http","$compile","$filter","$templateCache","adStrapUtils",function(a,e,n,i,g,l){function s(e,i,s){e[s.tableName]={items:{list:t,paging:{currentPage:1,totalPages:t,pageSize:t,pageSizes:a(s.pageSizes)()||[10,25,50]}},localConfig:{pagingArray:[]},applyFilter:l.applyFilter};var o=e[s.tableName],r=g.get("tablelite/tablelite.tpl.html");o.items.paging.pageSize=o.items.paging.pageSizes[0],o.loadPage=function(a){var t,n,i=(a-1)*o.items.paging.pageSize,g=i+o.items.paging.pageSize;for(o.items.list=e.$eval(s.localDataSource).slice(i,g),o.items.paging.currentPage=a,o.items.paging.totalPages=Math.ceil(e.$eval(s.localDataSource).length/o.items.paging.pageSize),o.localConfig.pagingArray=[],n=Math.ceil(a/o.items.paging.pageSize)*o.items.paging.pageSize-(o.items.paging.pageSize-1),t=0;5>t;t++)n+t>0&&n+t<=o.items.paging.totalPages&&o.localConfig.pagingArray.push(n+t)},o.loadNextPage=function(){o.items.paging.currentPage+1<=o.items.paging.totalPages&&o.loadPage(o.items.paging.currentPage+1)},o.loadPreviousPage=function(){o.items.paging.currentPage-1>0&&o.loadPage(o.items.paging.currentPage-1)},o.loadLastPage=function(){o.localConfig.disablePaging||o.loadPage(o.items.paging.totalPages)},o.pageSizeChanged=function(a){o.items.paging.pageSize=a,o.loadPage(1)},o.loadPage(1),s.tableClasses=s.tableClasses||"table",s.paginationBtnGroupClasses=s.paginationBtnGroupClasses||"btn-group btn-group-sm",r=r.replace(/%=tableName%/g,s.tableName).replace(/%=columnDefinition%/g,s.columnDefinition).replace(/%=paginationBtnGroupClasses%/g,s.paginationBtnGroupClasses).replace(/%=tableClasses%/g,s.tableClasses),angular.element(i).html(n(r)(e))}return{restrict:"E",link:s}}]),angular.module("adaptv.adaptStrap.treebrowser",[]).provider("$treebrowser",function(){var a=this.defaults={expandIconClass:"glyphicon glyphicon-plus-sign",collapseIconClass:"glyphicon glyphicon-minus-sign",loadingIconClass:"glyphicon glyphicon-refresh ad-spin"};this.$get=function(){return{settings:a}}}).directive("adTreeBrowser",["$compile","$http","$treebrowser","$templateCache",function(a,e,t,n){return{restrict:"E",link:function(i,g,l){var s=l.treeName||"",o=l.nodeTemplateUrl||"",r=l.nodeHeaderUrl||"",p=l.childrenPadding||15,c="",u=function(e,o){var r=n.get("treebrowser/treebrowser.tpl.html");c=r.replace(/%=treeName%/g,s).replace(/%=treeRootName%/g,l.treeRoot).replace(/%=bordered%/g,l.bordered).replace(/%=expandIconClass%/g,l.expandIconClass||t.settings.expandIconClass).replace(/%=collapseIconClass%/g,l.collapseIconClass||t.settings.collapseIconClass).replace(/%=loadingIconClass%/g,l.loadingIconClass||t.settings.loadingIconClass).replace(/%=childNodeName%/g,l.childNode).replace(/%=childrenPadding%/g,p).replace(/%=rowNgClass%/g,l.rowNgClass||"").replace(/%=nodeTemplate%/g,e).replace(/%=nodeHeaderTemplate%/g,o||""),g.empty(),g.append(a(c)(i))};i[s+"TreeBrowser"]={toggle:function(a,e){var t;a.stopPropagation(),t=i.$eval(l.toggleCallback),t?t(e):e._expanded=!e._expanded},hasChildren:function(a){var e=i.$eval(l.hasChildren),t=a[l.childNode]&&a[l.childNode].length>0;return e&&(t=e(a)),t},showHeader:""!==r?!0:!1},""!==o?e.get(o).success(function(a){""!==r?e.get(r).success(function(e){u(a,e)}):u(a,"")}):u('<span>{{ item.name || "" }}</span>')}}}]),angular.module("adaptv.adaptStrap.utils",[]).factory("adStrapUtils",["$filter",function(a){return{evalObjectProperty:function(a,e){var t=e.split(".");if(a)for(;t.length;)a&&(a=a[t.shift()]);return a},applyFilter:function(e,t){var n,i;return t&&(n=t.split(":"),i=n[1],e=i?a(n[0])(e,i):a(n[0])(e)),e}}}]).constant("adDebounce",function(a,e,t){var n,i,g,l,s;return function(){g=this,i=arguments,l=new Date;var o=function(){var r=new Date-l;e>r?n=setTimeout(o,e-r):(n=null,t||(s=a.apply(g,i)))},r=t&&!n;return n||(n=setTimeout(o,e)),r&&(s=a.apply(g,i)),s}}).provider("$adPaging",function(){var a=this.defaults={request:{start:"skip",pageSize:"limit",page:"page"},response:{totalItems:"data",itemsLocation:"pagination.totalCount"}};this.$get=function(e,t,n){return{loadPage:function(i,g,l,s){var o,r,p,c,u=(i-1)*g,d=e.defer(),m=angular.copy(a),f=angular.copy(l);return f.paginationConfig&&f.paginationConfig.request&&angular.extend(m.request,f.paginationConfig.request),f.paginationConfig&&f.paginationConfig.response&&angular.extend(m.response,f.paginationConfig.response),f.params[m.request.start]=u,f.params[m.request.pageSize]=g,f.params[m.request.page]=i,p=function(a){var e={items:n.evalObjectProperty(a,m.response.itemsLocation),currentPage:i,totalPages:Math.ceil(n.evalObjectProperty(a,m.response.totalItems)/g),pagingArray:[],identityToken:s};for(r=Math.ceil(i/g)*g-(g-1),o=0;5>o;o++)r+o>0&&r+o<=e.totalPages&&e.pagingArray.push(r+o);d.resolve(e)},c=function(a){d.reject(a)},"JSONP"===f.method?t.jsonp(f.url+"?callback=JSON_CALLBACK",f).success(p).error(c):t(f).success(p).error(c),d.promise}}}})}(window,document);